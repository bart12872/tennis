<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Match Tennis</title>
  <style>
    body { font-family: sans-serif; padding: 10px; }
    button { font-size: 1.2em; margin: 5px; padding: 10px; }
    .section { margin-top: 20px; }
    .match-card { border: 1px solid #ccc; padding: 8px; margin-bottom: 10px; border-radius: 5px; }
    pre { white-space: pre-wrap; word-wrap: break-word; }
  </style>
</head>
<body>
  <h2>ðŸŽ¾ Match Tennis</h2>
  <button onclick="startMatch()">DÃ©but de match</button>
  <button onclick="afficherAnciensMatchs()">Voir les anciens matchs</button>

  <div class="section" id="anciens-matchs"></div>

  <script>
    // DÃ©marre un nouveau match et stocke des donnÃ©es de test
    function startMatch() {
      const matchId = "tennis_match_" + Date.now();
      const matchData = {
        id: matchId,
        date: new Date().toISOString(),
        joueur1: 0,
        joueur2: 0,
        log: [
          { point: 1, gagnant: "J1" },
          { point: 2, gagnant: "J2" },
        ]
      };
      localStorage.setItem(matchId, JSON.stringify(matchData));
      alert("Nouveau match enregistrÃ© avec ID : " + matchId);
    }

    // Affiche tous les anciens matchs stockÃ©s
    function afficherAnciensMatchs() {
      const container = document.getElementById("anciens-matchs");
      container.innerHTML = "";

      const keys = Object.keys(localStorage).filter(k => k.startsWith("tennis_match_"));
      if (keys.length === 0) {
        container.innerHTML = "<p>Aucun match trouvÃ©.</p>";
        return;
      }

      keys.sort().reverse(); // les plus rÃ©cents en premier
      keys.forEach(key => {
        const data = JSON.parse(localStorage.getItem(key));
        const div = document.createElement("div");
        div.className = "match-card";
        div.innerHTML = `
          <strong>${key}</strong><br>
          <button onclick="exporterMatch('${key}')">ðŸ“¤ Exporter</button>
          <button onclick="supprimerMatch('${key}')">ðŸ—‘ Supprimer</button>
          <pre>${JSON.stringify(data, null, 2)}</pre>
        `;
        container.appendChild(div);
      });
    }

    // Exporter un match en fichier .json
    function exporterMatch(key) {
      const data = localStorage.getItem(key);
      const blob = new Blob([data], { type: "application/json" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = key + ".json";
      a.click();
      URL.revokeObjectURL(url);
    }

    // Supprimer un match du localStorage
    function supprimerMatch(key) {
      if (confirm("Supprimer dÃ©finitivement ce match ?")) {
        localStorage.removeItem(key);
        afficherAnciensMatchs(); // rafraÃ®chir la liste
      }
    }
  </script>
</body>
</html>
